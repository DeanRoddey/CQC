// ----------------------------------------------------------------------------
//  FILE: CQCRPortClient_ChatClientProxy.cpp
//  DATE: Fri, Feb 12 21:14:15 2021 -0500
//    ID: 8DC119F469C5036D-D3DE9312730302EE
//
//  This file was generated by the Charmed Quark CIDIDL compiler. Do not make
//  changes by hand, because they will be lost if the file is regenerated.
// ----------------------------------------------------------------------------

// ----------------------------------------------------------------------------
// Includes
// ----------------------------------------------------------------------------
#include "CQCRPortClient_.hpp"

// ----------------------------------------------------------------------------
// Magic macros
// ----------------------------------------------------------------------------
AdvRTTIDecls(TRemChatClientProxy,TOrbClientBase)


// ----------------------------------------------------------------------------
// TRemChatClientProxy: Public, static data
// ----------------------------------------------------------------------------
const TString TRemChatClientProxy::strInterfaceId(L"8DC119F469C5036D-D3DE9312730302EE");
const TString TRemChatClientProxy::strInstanceId(L"C4C9F2448D394831-EFDE3C4B6C36A40F");



// ----------------------------------------------------------------------------
// TRemChatClientProxy: Constructors and Destructor
// ----------------------------------------------------------------------------
TRemChatClientProxy::TRemChatClientProxy()
{
}

TRemChatClientProxy::
TRemChatClientProxy(const TOrbObjId& ooidSrc, const TString& strNSBinding)
{
    #if CID_DEBUG_ON
    if (!ooidSrc.oidKey().bIsInterfaceId(strInterfaceId))
    {
        facCIDOrb().ThrowErr
        (
            CID_FILE
            , CID_LINE
            , kOrbErrs::errcClient_BadIntfId
            , tCIDLib::ESeverities::Failed
            , tCIDLib::EErrClasses::BadParms
            , ooidSrc.oidKey().mhashInterface()
            , strInterfaceId
        );
    }
    #endif
    SetObjId(ooidSrc, strNSBinding, kCIDLib::False);
}

TRemChatClientProxy::~TRemChatClientProxy()
{
}

// ----------------------------------------------------------------------------
// TRemChatClientProxy: Public, non-virtual methods
// ----------------------------------------------------------------------------
tCIDLib::TBoolean TRemChatClientProxy::bExchange
(
    const TString& strSendMsg
    , COP TString& strRecMsg)
{
    #pragma warning(suppress : 26494)
    tCIDLib::TBoolean retVal;
    TCmdQItem* pcqiToUse = pcqiGetCmdItem(ooidThis().oidKey());
    TOrbCmd& ocmdToUse = pcqiToUse->ocmdData();
    try
    {
        ocmdToUse.strmOut() << TString(L"bExchange");
        ocmdToUse.strmOut() << strSendMsg;
        Dispatch(30000, pcqiToUse);
        ocmdToUse.strmIn().Reset();
        ocmdToUse.strmIn() >> retVal;
        ocmdToUse.strmIn() >> strRecMsg;
        GiveBackCmdItem(pcqiToUse);
    }
    catch(TError& errToCatch)
    {
        GiveBackCmdItem(pcqiToUse);
        errToCatch.AddStackLevel(CID_FILE, CID_LINE);
        throw;
    }
    return retVal;
}

